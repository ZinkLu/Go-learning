# Go的执行原理以及Go的命令

[toc]

## 1. Go的源码文件

### 1.1 命令源码

包含main函数的; Go程序的入口; 一般只有一个命令源码文件;

如果一个包下面同时有多有命令源码文件, 将不能使用`go install`命令

### 1.2 库源码文件

没有main函数的普通的Go源码文件, 库源码文件被安装后, 响应的归档文件(`.a`文件)会被存档到当前工作区的pkg的平台相关目录下.

### 1.3 测试

名称以`_test.go`为后缀的代码文件, 并且必须包含`Test`或者`Benchmark`名称为前缀的函数;

```golang
func TestXXX(t *testing.T) {

}

func BenchmarkXXX(t *testing.B) {

}
```

## 2. Go的命令

> `go help` 查看所有命令

1. `go run` 只能运行命令源码文件(包含main函数的), 生成了`归档文件`和`可执行文件`
    
    - `-n`选项: 

    - `-work`选项: 查看生成的临时文件路径

2. `go build` 主要用于测试编译.

    - 如果是普通包, 执行`go build`之后, 不会产生任何文件
    
    - 如果是main包, 执行build后, 会在当前目录下生成一个可执行文件. `go build -o `可以指定路径
    
    - build会编译文件夹下所有文件, 如果只想编译其中一个, 可在build后加文件名.

    - `-c`指定可执行文件名称

    - 忽略以`_`或者`.`开头的文件

3. `go install` 
    
    - 包含主函数(命令源码文件): 在bin文件夹下生成可执行文件

    - 不包含主函数(库源码文件): 在pkg文件夹下生成`.a`的归档文件

4. `go get`: 获取第三方包

    - 先下载源码至`src`

    - 再编译归档文件至`pkg`
    
